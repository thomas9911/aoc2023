import aoc2023


def test_day03a_parse_tokens1():
    schema = """467
.*.
.9$"""

    schematic = aoc2023.day03a_parse_tokens(schema)
    assert {
        (0, 0): "4",
        (1, 0): "6",
        (2, 0): "7",
        (1, 1): "*",
        (1, 2): "9",
        (2, 2): "#",
    } == schematic.tokens


def test_day03a_parse_tokens2():
    # schema = "467..114..\r\n...*......\r\n..35..633.\r\n......#...\r\n617*......\r\n.....+.58.\r\n..592.....\r\n......755.\r\n...$.*....\r\n.664.598.."
    schema = """467..114..
...*......
..35..633.
......#...
617*......
.....+.58.
..592.....
......755.
...$.*....
.664.598.."""

    schematic = aoc2023.day03a_parse_tokens(schema)
    print(schematic.tokens)
    assert {
        (0, 0): "4",
        (1, 0): "6",
        (2, 0): "7",
        (5, 0): "1",
        (6, 0): "1",
        (7, 0): "4",
        (3, 1): "*",
        (2, 2): "3",
        (3, 2): "5",
        (6, 2): "6",
        (7, 2): "3",
        (8, 2): "3",
        (6, 3): "#",
        (0, 4): "6",
        (1, 4): "1",
        (2, 4): "7",
        (3, 4): "*",
        (5, 5): "#",
        (7, 5): "5",
        (8, 5): "8",
        (2, 6): "5",
        (3, 6): "9",
        (4, 6): "2",
        (6, 7): "7",
        (7, 7): "5",
        (8, 7): "5",
        (3, 8): "#",
        (5, 8): "*",
        (1, 9): "6",
        (2, 9): "6",
        (3, 9): "4",
        (5, 9): "5",
        (6, 9): "9",
        (7, 9): "8",
    } == schematic.tokens


def test_day03a():
    assert 540131 == aoc2023.day03a("data/day03.txt")


def test_day03b():
    assert 467835 == aoc2023.day03b("data/day03_debug.txt")
